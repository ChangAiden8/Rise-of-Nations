scripted_gui = {

	nuclear_attack_ui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view 
		window_name = "nuclear_attack_ui_window"
		visible = {
			ROOT = {
				has_country_flag = show_nuclear_ui
			}
		}
		triggers = {
			
			launch_nuke_attack_click_enabled = {
				ROOT = {
					any_owned_state = {
						any_state = {
							CONTROLLER = {
								tag = ROOT
							}
							meta_trigger = {
								text = { distance_to = { value > [DISTANCE_NUMBER] target = PREV } }
								DISTANCE_NUMBER = 10
							}
						}
						
					}
					
				}
			}
		}
		properties = {
			warhead_selected = {
				frame = ROOT.warhead_type
			}
		}
		effects = {
			warhead_selected_click = {
				ROOT = {
					
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_warhead
							}
						}
						set_country_flag = selecting_new_warhead
					}
					else = {
						
						clr_country_flag = selecting_new_warhead
					}

					if = {
						limit = {
							has_country_flag = selecting_new_missile
						}
						clr_country_flag = selecting_new_missile
					}
				}
			}
			nuclear_missile_selected_click = {
				ROOT = {
					
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_missile
							}
						}
						set_country_flag = selecting_new_missile
					}
					else = {
						
						clr_country_flag = selecting_new_missile
					}

					if = {
						limit = {
							has_country_flag = selecting_new_warhead
						}
						clr_country_flag = selecting_new_warhead
					}
				}
			}
			launch_nuke_attack_click = {
				CONTROLLER = {
					for_each_scope_loop = { array = owned_states

						ROOT = { launch_nuke = { state = PREV controller = PREV.PREV use_nuke = no } }
					}
				}
			}
		
		}
		
	}
	nuclear_attack_ui_warhead_selection={

		context_type = selected_state_context
		parent_window_name = "nuclear_attack_container"
		window_name = "nuclear_warhead_choice_holder"
		visible = {
			ROOT = {
				has_country_flag = selecting_new_warhead
			}
		}
		effects = {
			warhead_1_click = {
				ROOT = {
					set_variable = { warhead_type = 1 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_warhead
							}
						}
						set_country_flag = selecting_new_warhead
					}
					else = {
						
						clr_country_flag = selecting_new_warhead
					}
				}
			}
			warhead_2_click = {
				ROOT = {
					set_variable = { warhead_type = 2 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_warhead
							}
						}
						set_country_flag = selecting_new_warhead
					}
					else = {
						
						clr_country_flag = selecting_new_warhead
					}
				}
			}
			warhead_3_click = {
				ROOT = {
					set_variable = { warhead_type = 3 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_warhead
							}
						}
						set_country_flag = selecting_new_warhead
					}
					else = {
						
						clr_country_flag = selecting_new_warhead
					}
				}
			}
			warhead_4_click = {
				ROOT = {
					set_variable = { warhead_type = 4 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_warhead
							}
						}
						set_country_flag = selecting_new_warhead
					}
					else = {
						
						clr_country_flag = selecting_new_warhead
					}
				}
			}
			warhead_5_click = {
				ROOT = {
					set_variable = { warhead_type = 5 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_warhead
							}
						}
						set_country_flag = selecting_new_warhead
					}
					else = {
						
						clr_country_flag = selecting_new_warhead
					}
				}
			}
		}
	}
	nuclear_attack_ui_missile_selection ={
		context_type = selected_state_context
		parent_window_name = "nuclear_attack_container"
		window_name = "nuclear_missile_choice_holder"
		visible = {
			ROOT = {
				has_country_flag = selecting_new_missile
			} 
		}

		effects = {
			nuclear_missile_1_click = {
				ROOT = {
					set_variable = { missile_type = 1 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_missile
							}
						}
						set_country_flag = selecting_new_missile
					}
					else = {
						
						clr_country_flag = selecting_new_missile
					}
				}
			}
			nuclear_missile_2_click = {
				ROOT = {
					set_variable = { missile_type = 2 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_missile
							}
						}
						set_country_flag = selecting_new_missile
					}
					else = {
						
						clr_country_flag = selecting_new_missile
					}
				}
			}
			nuclear_missile_3_click = {
				ROOT = {
					set_variable = { missile_type = 3 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_missile
							}
						}
						set_country_flag = selecting_new_missile
					}
					else = {
						
						clr_country_flag = selecting_new_missile
					}
				}
			}
			nuclear_missile_4_click = {
				ROOT = {
					set_variable = { missile_type = 4 }
					if = {
						limit = {
							NOT = {
								has_country_flag = selecting_new_missile
							}
						}
						set_country_flag = selecting_new_missile
					}
					else = {
						
						clr_country_flag = selecting_new_missile
					}
				}
			}
		}
	}
}	

