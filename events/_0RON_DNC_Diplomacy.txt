######################################
#####Decolonization Diplo Events#######
######################################
add_namespace = DNC_Diplomacy
add_namespace = DNC_DiplomacyNews

# PROPOSES A ROYAL WEDDING
country_event = {
	id = DNC_Diplomacy.1
	title = DNC_Diplomacy.1.t
	desc = DNC_Diplomacy.1.d
	picture = GFX_report_event_DNC_Wedding_country2
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				tag = MEX
			}
			modifier = {
				factor = 2
				tag = GER
			}
			modifier = {
				factor = 2
				tag = SPR
			}
			modifier = {
				factor = 2
				tag = POR
			}
			modifier = {
				factor = 0
				is_major = yes
			}
		}
		#Accept and Get Annexed
		name = DNC_Diplomacy.1.a
		
		if = {
			limit = {
				tag = MEX
			}
			activate_decision = RON_Formable_Decision23
			set_cosmetic_tag = VRS_Empire
			create_country_leader = {
				name = "Karl I"
				picture = "DNC/Archduke_Karl_I.dds"
				expire = "2060.1.1"
				ideology = constitutional_monarchism
			}
			create_country_leader = {
				name = "Karl I"
				picture = "DNC/Archduke_Karl_I.dds"
				expire = "2060.1.1"
				ideology = despotism
			}
			set_country_flag = DNC_Spanish_Ally
		}
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.2
				hours = 1
			}
		}
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 4
				tag = GER
			}
			modifier = {
				factor = 4
				tag = SPR
			}
			modifier = {
				factor = 4
				tag = POR
			}
			modifier = {
				factor = 2
				tag = MEX
			}
			modifier = {
				factor = 2
				is_in_faction_with = FROM
			}
		}
		#Accept and Get Puppeted
		name = DNC_Diplomacy.1.b
		
		if = {
			limit = {
				tag = MEX
			}
			activate_decision = RON_Formable_Decision23	
			set_cosmetic_tag = VRS_Empire
			create_country_leader = {
				name = "Karl I"
				picture = "DNC/Archduke_Karl_I.dds"
				expire = "2060.1.1"
				ideology = constitutional_monarchism
			}
			create_country_leader = {
				name = "Karl I"
				picture = "DNC/Archduke_Karl_I.dds"
				expire = "2060.1.1"
				ideology = despotism
			}
			set_country_flag = DNC_Spanish_Ally
		}
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.3
				hours = 1
			}
		}
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 8
				tag = GER
			}
			modifier = {
				factor = 8
				tag = POR
			}
			modifier = {
				factor = 4
				tag = MEX
			}
		}
		#Accept An Alliance Only
		name = DNC_Diplomacy.1.c
		
		if = {
			limit = {
				tag = MEX
			}
			activate_decision = RON_Formable_Decision23
			set_cosmetic_tag = VRS_Empire
			create_country_leader = {
				name = "Karl I"
				picture = "DNC/Archduke_Karl_I.dds"
				expire = "2060.1.1"
				ideology = constitutional_monarchism
			}
			create_country_leader = {
				name = "Karl I"
				picture = "DNC/Archduke_Karl_I.dds"
				expire = "2060.1.1"
				ideology = despotism
			}
			#As Mexico is Independent it will demand subjugation from its weaker neighbours
			GUA = {
				country_event = DNC_Diplomacy.6
			}
			NIC = {
				country_event = DNC_Diplomacy.6
			}
			ELS = {
				country_event = DNC_Diplomacy.6
			}
			HON = {
				country_event = DNC_Diplomacy.6
			}
			COS = {
				country_event = DNC_Diplomacy.6
			}
			set_country_flag = DNC_Spanish_Ally
		}
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.4
				hours = 1
			}
		}
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_government = communism
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
			modifier = {
				factor = 16
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				factor = 16
				has_war_with = FROM
			}
			modifier = {
				factor = 2
				is_guaranteed_by = ENG
			}
			modifier = {
				factor = 2
				is_guaranteed_by = FRA
			}
		}
		#Decline Offer
		name = DNC_Diplomacy.1.e
		FROM = {
			country_event = {
				id = DNC_Diplomacy.5
				hours = 1
			}
		}
	}
}

#Accept and Get Annexed
country_event = {
	id = DNC_Diplomacy.2
	title = DNC_Diplomacy.2.t
	desc = DNC_Diplomacy.2.d
	picture = GFX_report_event_DNC_Wedding_country2
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.2.a

		ROOT = {
			annex_country = {
				target = FROM
				transfer_troops = yes
			}
		}

		news_event = {
			id = DNC_DiplomacyNews.1
			hours = 6
		}

	}
}

#Accept and Get Puppeted
country_event = {
	id = DNC_Diplomacy.3
	title = DNC_Diplomacy.3.t
	desc = DNC_Diplomacy.3.d
	picture = GFX_report_event_DNC_Wedding_country2
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.3.a

		ROOT = {
			if = {
				limit = {
					OR = {
						has_dlc = "Together for Victory"
						has_dlc = "Man the Guns"
					}
				}
				set_autonomy = {
					target = FROM
					autonomous_state = autonomy_dominion
					freedom_level = 0.1
				}
			}
			else = {
				puppet = FROM
			}
		}

		news_event = {
			id = DNC_DiplomacyNews.1
			hours = 6
		}

	}
}

#Accept An Alliance Only
country_event = {
	id = DNC_Diplomacy.4
	title = DNC_Diplomacy.4.t
	desc = DNC_Diplomacy.4.d
	picture = GFX_report_event_DNC_Wedding_country2
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.4.a

		ROOT = {
			if = {
				limit = {
					is_in_faction = yes
					is_faction_leader = yes
				}
				add_to_faction = FROM
			}
			else = {
				give_guarantee = FROM
				FROM = { give_guarantee = ROOT }
			}
		}

		news_event = {
			id = DNC_DiplomacyNews.1
			hours = 6
		}

	}
}

#Decline Offer
country_event = {
	id = DNC_Diplomacy.5
	title = DNC_Diplomacy.5.t
	desc = DNC_Diplomacy.5.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.5.a

		ROOT = {
			create_wargoal = {
				type = annex_everything
				target = FROM
			}
		}

		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}

	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.5.b

		FROM = {
			add_opinion_modifier = {
				modifier = RI_hostile_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_hostile_foreign_policy
			target = FROM
		}

		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}
}

# INVITATION TO JOIN CONFEDERATION
country_event = {
	id = DNC_Diplomacy.6
	title = DNC_Diplomacy.6.t
	desc = DNC_Diplomacy.6.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 4
				tag = LUX
			}
			modifier = {
				factor = 2
				tag = BEL
			}
			modifier = {
				factor = 2
				tag = HOL
			}
			modifier = {
				factor = 2
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				has_army_size = { size < 20 }
			}
			modifier = {
				factor = 0
				is_major = yes
			}
			modifier = {
				factor = 4
				tag = GUA
			}
			modifier = {
				factor = 4
				tag = NIC
			}
			modifier = {
				factor = 4
				tag = ELS
			}
			modifier = {
				factor = 4
				tag = HON
			}
			modifier = {
				factor = 4
				tag = COS
			}
		}
		#Accept and Get Annexed
		name = DNC_Diplomacy.6.a
		FROM = {
			country_event = {
				id = DNC_Diplomacy.7
				hours = 1
			}
		}
		news_event = {
			id = DNC_DiplomacyNews.3
			hours = 1
		}
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				tag = LUX
			}
			modifier = {
				factor = 4
				tag = BEL
			}
			modifier = {
				factor = 4
				tag = HOL
			}
			modifier = {
				factor = 2
				tag = SWI
			}
			modifier = {
				factor = 2
				tag = GUA
			}
			modifier = {
				factor = 2
				tag = NIC
			}
			modifier = {
				factor = 2
				tag = ELS
			}
			modifier = {
				factor = 2
				tag = HON
			}
			modifier = {
				factor = 2
				tag = COS
			}
			modifier = {
				factor = 2
				has_army_size = { size > 19 }
				has_army_size = { size < 40 }
			}
		}
		#Accept and Get Puppeted
		name = DNC_Diplomacy.6.b
		FROM = {
			country_event = {
				id = DNC_Diplomacy.8
				hours = 1
			}
		}
		news_event = {
			id = DNC_DiplomacyNews.3
			hours = 1
		}
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 4
				tag = SWI
			}
			modifier = {
				factor = 2
				has_government = communism
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
			modifier = {
				factor = 8
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				factor = 2
				has_army_size = { size > 39 }
			}
			modifier = {
				factor = 16
				has_war_with = FROM
			}
			modifier = {
				factor = 2
				is_guaranteed_by = ENG
			}
			modifier = {
				factor = 2
				is_guaranteed_by = FRA
			}
		}
		#Decline Offer
		name = DNC_Diplomacy.6.c
		FROM = {
			country_event = {
				id = DNC_Diplomacy.9
				hours = 1
			}
		}
	}
}

#Accept and Get Annexed
country_event = {
	id = DNC_Diplomacy.7
	title = DNC_Diplomacy.7.t
	desc = DNC_Diplomacy.7.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.7.a

		ROOT = {
			annex_country = {
				target = FROM
				transfer_troops = yes
			}
		}

	}
}

#Accept and Get Puppeted
country_event = {
	id = DNC_Diplomacy.8
	title = DNC_Diplomacy.8.t
	desc = DNC_Diplomacy.8.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.8.a

		ROOT = {
			if = {
				limit = {
					OR = {
						has_dlc = "Together for Victory"
						has_dlc = "Man the Guns"
					}
				}
				set_autonomy = {
					target = FROM
					autonomous_state = autonomy_dominion
					freedom_level = 0.1
				}
			}
			else = {
				puppet = FROM
			}
		}

	}
}

#Decline Offer
country_event = {
	id = DNC_Diplomacy.9
	title = DNC_Diplomacy.9.t
	desc = DNC_Diplomacy.9.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.9.a

		ROOT = {
			create_wargoal = {
				type = annex_everything
				target = FROM
			}
		}

		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}

	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.9.b

		FROM = {
			add_opinion_modifier = {
				modifier = RI_hostile_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_hostile_foreign_policy
			target = FROM
		}

		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}
}

#Spain Demands Florida
country_event = {
	id = DNC_Diplomacy.10
	title = DNC_Diplomacy.10.t
	desc = DNC_Diplomacy.10.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 2
				has_army_size = { size < 50 }
			}
			modifier = {
				factor = 8
				surrender_progress > 0.1
			}
			modifier = {
				factor = 2
				any_country = {
					is_major = yes
					has_war_with = ROOT
				}
			}
		}
		#Accept
		name = DNC_Diplomacy.10.a
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.11
				hours = 1
			}
		}

	}

	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_in_faction_with = FRA
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				factor = 2
				is_major = yes
			}
			modifier = {
				factor = 2
				has_army_size = { size > 50 }
			}
		}
		#Decline
		name = DNC_Diplomacy.10.b
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.12
				hours = 1
			}
		}

	}
}

#Britain Accepts
country_event = {
	id = DNC_Diplomacy.11
	title = DNC_Diplomacy.11.t
	desc = DNC_Diplomacy.11.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.11.a
		
		366 = { add_core_of = VRS }
		transfer_state = 366
		if = { limit = { VRS = { is_subject_of = ROOT } } VRS = { transfer_state = 366 } }
		
		
		FROM = {
			add_opinion_modifier = {
				modifier = RI_friendly_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_friendly_foreign_policy
			target = FROM
		}
		
		news_event = {
			id = DNC_DiplomacyNews.4
			hours = 6
		}

	}
}

#Britain Declines
country_event = {
	id = DNC_Diplomacy.12
	title = DNC_Diplomacy.12.t
	desc = DNC_Diplomacy.12.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_major = yes
			}
			modifier = {
				factor = 2
				has_army_size = { size > 50 }
			}
		}
		name = DNC_Diplomacy.12.a
		
		create_wargoal = { type = annex_everything target = FROM }
		366 = { add_core_of = VRS }
		add_state_claim = 366
		
		FROM = {
			add_opinion_modifier = {
				modifier = RI_hostile_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_hostile_foreign_policy
			target = FROM
		}
		
		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}
	
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_major = no
			}
			modifier = {
				factor = 2
				has_army_size = { size < 50 }
			}
		}
		name = DNC_Diplomacy.12.b
		
		FROM = {
			add_opinion_modifier = {
				modifier = RI_hostile_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_hostile_foreign_policy
			target = FROM
		}
		
		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}
}


#France Demands Quebec
country_event = {
	id = DNC_Diplomacy.13
	title = DNC_Diplomacy.13.t
	desc = DNC_Diplomacy.13.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 2
				has_army_size = { size < 50 }
			}
			modifier = {
				factor = 8
				surrender_progress > 0.1
			}
			modifier = {
				factor = 2
				any_country = {
					is_major = yes
					has_war_with = ROOT
				}
			}
		}
		#Accept
		name = DNC_Diplomacy.13.a
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.14
				hours = 1
			}
		}

	}

	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_in_faction_with = SPR
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				factor = 2
				is_major = yes
			}
			modifier = {
				factor = 2
				has_army_size = { size > 50 }
			}
		}
		#Decline
		name = DNC_Diplomacy.13.b
		
		FROM = {
			country_event = {
				id = DNC_Diplomacy.15
				hours = 1
			}
		}

	}
}

#Britain Accepts
country_event = {
	id = DNC_Diplomacy.14
	title = DNC_Diplomacy.14.t
	desc = DNC_Diplomacy.14.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.14.a
		
		466 = { add_core_of = NFR }
		468 = { add_core_of = NFR }
		276 = { add_core_of = NFR }
		393 = { add_core_of = NFR }
		394 = { add_core_of = NFR }
		395 = { add_core_of = NFR }
		856 = { add_core_of = NFR }
		857 = { add_core_of = NFR }
		682 = { add_core_of = NFR }
		332 = { add_core_of = NFR }
		842 = { add_core_of = NFR }
		465 = { add_core_of = NFR }
		464 = { add_core_of = NFR }
		834 = { add_core_of = NFR }
		331 = { add_core_of = NFR }
		
		
		ROOT = { every_state = { limit = { is_core_of = NFR is_controlled_by = ENG } ROOT = { transfer_state = PREV } } }
		ROOT = { every_state = { limit = { is_core_of = NFR is_controlled_by = CAN } ROOT = { transfer_state = PREV } } }
		ROOT = { every_state = { limit = { is_core_of = NFR is_controlled_by = QUE } ROOT = { transfer_state = PREV } } }
		ROOT = { every_state = { limit = { is_core_of = NFR is_controlled_by = BNA } ROOT = { transfer_state = PREV } } }
		
		
		FROM = {
			add_opinion_modifier = {
				modifier = RI_friendly_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_friendly_foreign_policy
			target = FROM
		}
		
		news_event = {
			id = DNC_DiplomacyNews.5
			hours = 6
		}

	}
}

#Britain Declines
country_event = {
	id = DNC_Diplomacy.15
	title = DNC_Diplomacy.15.t
	desc = DNC_Diplomacy.15.d
	picture = GFX_report_event_DNC_Conference_country1
	is_triggered_only = yes
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.15.a
		
		create_wargoal = { type = annex_everything target = FROM }
		466 = { add_core_of = NFR }
		468 = { add_core_of = NFR }
		276 = { add_core_of = NFR }
		393 = { add_core_of = NFR }
		394 = { add_core_of = NFR }
		395 = { add_core_of = NFR }
		856 = { add_core_of = NFR }
		857 = { add_core_of = NFR }
		682 = { add_core_of = NFR }
		332 = { add_core_of = NFR }
		842 = { add_core_of = NFR }
		465 = { add_core_of = NFR }
		464 = { add_core_of = NFR }
		834 = { add_core_of = NFR }
		331 = { add_core_of = NFR }
		add_state_claim = 466
		add_state_claim = 468
		add_state_claim = 276
		add_state_claim = 393
		add_state_claim = 394
		add_state_claim = 395
		add_state_claim = 856
		add_state_claim = 857
		add_state_claim = 682
		add_state_claim = 332
		add_state_claim = 842
		add_state_claim = 465
		add_state_claim = 464
		add_state_claim = 834
		add_state_claim = 331
		
		FROM = {
			add_opinion_modifier = {
				modifier = RI_hostile_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_hostile_foreign_policy
			target = FROM
		}
		
		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}
	
	option = {
		ai_chance = {
			factor = 10
		}
		name = DNC_Diplomacy.15.b
		
		FROM = {
			add_opinion_modifier = {
				modifier = RI_hostile_foreign_policy
				target = ROOT
			}
		}

		add_opinion_modifier = {
			modifier = RI_hostile_foreign_policy
			target = FROM
		}
		
		news_event = {
			id = DNC_DiplomacyNews.2
			hours = 6
		}

	}
}



# Royal Wedding
news_event = {
	id = DNC_DiplomacyNews.1
	title = DNC_DiplomacyNews.1.t
	desc = DNC_DiplomacyNews.1.d
	picture = GFX_news_event_DNC_Wedding_news2
	major = yes
	is_triggered_only = yes
	option = {
		name = DNC_DiplomacyNews.1.a
	}
}

# Negotiations Break Down
news_event = {
	id = DNC_DiplomacyNews.2
	title = DNC_DiplomacyNews.2.t
	desc = DNC_DiplomacyNews.2.d
	picture = GFX_news_event_DNC_Conference_news1
	major = yes
	is_triggered_only = yes
	option = {
		name = DNC_DiplomacyNews.2.a
	}
}


# Conference Success
news_event = {
	id = DNC_DiplomacyNews.3
	title = DNC_DiplomacyNews.3.t
	desc = DNC_DiplomacyNews.3.d
	picture = GFX_news_event_DNC_Conference_news1
	major = yes
	is_triggered_only = yes
	option = {
		name = DNC_DiplomacyNews.3.a
	}
}

# Florida Handed over to Spain
news_event = {
	id = DNC_DiplomacyNews.4
	title = DNC_DiplomacyNews.4.t
	desc = DNC_DiplomacyNews.4.d
	picture = GFX_news_event_DNC_Conference_news1
	major = yes
	is_triggered_only = yes
	option = {
		name = DNC_DiplomacyNews.4.a
	}
}

#Quebec Handed over to France
news_event = {
	id = DNC_DiplomacyNews.5
	title = DNC_DiplomacyNews.5.t
	desc = DNC_DiplomacyNews.5.d
	picture = GFX_news_event_DNC_Conference_news1
	major = yes
	is_triggered_only = yes
	option = {
		name = DNC_DiplomacyNews.5.a
	}
}
