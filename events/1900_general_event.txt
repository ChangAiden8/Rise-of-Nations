
add_namespace = chinese_empire

	country_event = {
		id = chinese_empire.1
		title = chinese_empire.1.t
		desc = chinese_empire.1.d
		
		fire_only_once = yes
		trigger = {
			date > 1900.1.1
			date < 1900.2.1
			tag = QIN
		}
		
		option = { #Anti Western alliance
		name = chinese_empire.1.a
		ai_chance = { base = 10 }
		set_country_flag = ally_the_boxer
		
		}
		
		option = { #Crush the boxer revolt
		name = chinese_empire.1.b
		ai_chance = {base = 0}
		}
		
	
	}
	country_event = { #challenge the Bund
		id = chinese_empire.2
		title = chinese_empire.2.t
		desc = chinese_empire.2.d
		
		fire_only_once = yes
		
		trigger = {
			tag = QIN
			date > 1900.6.21
			date < 1900.12.1
			has_country_flag = ally_the_boxer
		
		}
		
		option = {
			name = chinese_empire.2.a
			ai_chance = {factor = 1}
			QIN = {
				declare_war_on = {
					target = FRA
					type = take_core_state
				}
				declare_war_on = {
					target = ENG
					type = take_core_state
				}
				declare_war_on = {
					target = GER
					type = take_core_state
				}
			}
			every_country = {
				limit = {
					is_in_faction_with = FRA
				}
				add_ideas = {boxer_rebellion_NAT}
			}
			QIN = {add_ideas =  boxer_rebellion_QIN}
			
			hidden_effect = {
			619 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			758= {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			757 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			601 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			747 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			325 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			599 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 4656
				}
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 1469
				}
			}
			594 = {
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 4121
				}
				add_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 10004
				}
			}
			}
		}
	}
	country_event = { #Current situation
		id = chinese_empire.3
		title = chinese_empire.3.t
		desc = chinese_empire.3.d
		
		fire_only_once = yes
		
		trigger = {
			OR ={
				AND = {
					has_country_flag = ally_the_boxer
					tag = QIN
					date > 1901.9.7
					date < 1901.12.1
					NOT = {has_country_flag = civil_war}
					NOT = {has_country_flag = revolution_started}
				}
				AND = {
					tag = QIN
					QIN = {surrender_progress > 0.3}
					has_country_flag = ally_the_boxer 
					NOT = {has_country_flag = civil_war}
					NOT = {has_country_flag = revolution_started}
				}
			}
		
		}
		
		option = { #propose peace
			name = chinese_empire.3.a
			ai_chance = {base = 1000}
			every_country = {
				limit = { has_war_with = QIN}
				country_event = chinese_empire.4
				add_manpower = 100
				
				
			}
			clr_country_flag = ally_the_boxer
			hidden_effect = {
			619 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			758= {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			757 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			601 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			747 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			325 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			599 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 4656
				}
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 1469
				}
			}
			594 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 4121
				}
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 10004
				}
			}
			}
		
			
		}
		option = {	#keep fighting
			name = chinese_empire.3.b
			set_country_flag = refused_peace
		
		}
	
	}
	
	country_event = { # peace proposal
		id = chinese_empire.4
		title = chinese_empire.4.t
		desc = chinese_empire.4.d
		
		fire_only_once = no
		
		is_triggered_only = yes
		
		option = {	# accept chinese peace
			name = chinese_empire.4.a
			ai_chance = {base = 10000}
			white_peace = QIN
			remove_ideas = boxer_rebellion_NAT
			QIN = {remove_ideas = boxer_rebellion_QIN}
			
		}
		option = {	#refuse chinese peace
			name = chinese_empire.4.b
		}
	}
	
	country_event = { #Bitter peace
		id = chinese_empire.5
		title = chinese_empire.5.t
		desc = chinese_empire.5.d
		
		fire_only_once = yes
		
		trigger = { 
			has_country_flag = ally_the_boxer
			has_country_flag = refused_peace
			QIN = {surrender_progress > 0.6}

		}
		
		option = {	#no hopes left...
			name = chinese_empire.5.a
			
			every_country = {
				limit = {
					has_war_with = QIN
				}
				white_peace = QIN
				remove_ideas = boxer_rebellion_NAT
				
			}
			QIN = {remove_ideas = boxer_rebellion_QIN}
			every_state = { 
				limit = { 
					is_owned_by = QIN  
					has_state_flag = FRA_influence }
				FRA = { transfer_state = PREV }
			}
			every_state = { 
				limit = { 
					is_owned_by = QIN  
					has_state_flag = ENG_influence }
				RAJ = { transfer_state = PREV }
			}
			every_state = { 
				limit = { 
					is_owned_by = QIN  
					has_state_flag = JAP_influence }
				JAP = { transfer_state = PREV }
			}
			every_state = { 
				limit = { 
					is_owned_by = QIN  
					has_state_flag = GER_influence }
				GER = { transfer_state = PREV }
			}
			every_state = { 
				limit = { 
					is_owned_by = QIN  
					has_state_flag = RUE_influence }
				RUE = { transfer_state = PREV }
			}
			QIN = {set_country_flag = splitted}
			QIN = {release = MON}
			QIN = {release = SIK}
			QIN = {release = MAN}
			QIN = {release = MEN}
			QIN = {release = SHX}
			QIN = {release = XSM}
			XSM = {transfer_state = 752}
			QIN = {
				set_variable = {
					var = QIN_civilwar_support
					value = 0
				}
				set_variable = {
					var = QIN_opposition_support
					value = 100
				}
				set_variable = {
					var = num_smuggled_weapons
					value = 0
				}
				
			}
			hidden_effect = {
			619 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			758= {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			757 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			601 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			747 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			325 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = {
						all_provinces = yes
					}
				}
			}
			599 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 4656
				}
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 1469
				}
			}
			594 = {
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 4121
				}
				remove_province_modifier = {
					static_modifiers = { mountain_forts }
					province = 10004
				}
			}
			}
			
		}
	}
	country_event = { #chinese civil war in case of BP
		id = chinese_empire.6
		title = chinese_empire.6.t
		desc = chinese_empire.6.d
		
		fire_only_once = yes
		
		trigger = {
			NOT = {has_country_flag = civil_war}
			has_country_flag = ally_the_boxer
			has_country_flag = splitted
			date > 1904.2.3
			date < 1904.6.6
		}
		option = { #republic path
			name = chinese_empire.6.a
			ai_chance = { factor = 10}
			hidden_effect = {
				
				CHI = {
					add_state_core = 622
					add_state_core = 744
					add_state_core = 607
					add_state_core = 1030
					add_state_core = 1031
				
				}
				QIN = {release = CHI }
				transfer_units_fraction= {
					target = CHI
					size = QIN_opposition_support
					stockpile_ratio = QIN_opposition_support
					army_ratio = QIN_opposition_support
					navy_ratio = QIN_opposition_support
					air_ratio = QIN_opposition_support
			
				}
				QIN = {
					add_state_core = 622
					add_state_core = 744
					add_state_core = 607
					add_state_core = 1030
					add_state_core = 1031
				}
				declare_war_on = {
					target = CHI
					type = civil_war 
					
				}
				every_state = { 
					limit = { 
						is_owned_by = QIN
					}
					add_core_of = CHI
				}
		
			
				set_country_flag = civil_war
				
				send_equipment = {
					equipment = infantry_equipment
					amount = num_smuggled_weapons
					target = CHI
				}
				
			}
			CHI = { change_tag_from = QIN }
			#CHI = {add_ideas = CHI_civilwar}
			#QIN = {add_ideas = CHI_civilwar}
		}
		option = {
			name = chinese_empire.6.b
			hidden_effect = {
				
				CHI = {
					add_state_core = 622
					add_state_core = 744
					add_state_core = 607
					add_state_core = 1030
					add_state_core = 1031
				
				}
				QIN = {release = CHI }
				transfer_units_fraction= {
					target = CHI
					size = QIN_opposition_support
					stockpile_ratio = QIN_opposition_support
					army_ratio = QIN_opposition_support
					navy_ratio = QIN_opposition_support
					air_ratio = QIN_opposition_support
			
				}
				QIN = {
					add_state_core = 622
					add_state_core = 744
					add_state_core = 607
					add_state_core = 1030
					add_state_core = 1031
				}
				declare_war_on = {
					target = CHI
					type = civil_war 
					
				}
				every_state = { 
					limit = { 
						is_owned_by = QIN
					}
					add_core_of = CHI
				}
		
			
				set_country_flag = civil_war
				
				send_equipment = {
					equipment = infantry_equipment
					amount = num_smuggled_weapons
					target = CHI
				}
				
			}
			#CHI = {add_ideas = CHI_civilwar}
			#QIN = {add_ideas = CHI_civilwar}
		
		
		}
	}
	country_event = { #CHI victory
		
		id = chinese_empire.9
		title = chinese_empire.9.t
		desc = chinese_empire.9.d
		
	    fire_only_once = yes
		
		trigger = {
		    date > 1900.1.1
			date < 1914.1.1
			QIN = {has_country_flag = civil_war}
			QIN = {surrender_progress > 0.97}
			QIN = {has_war_with = CHI}
		}

		immediate = {
			CHI = {
				white_peace = QIN

			}
			
			QIN = { release = CHI }
			
		
		}
		option = {
			name = chinese_empire.9.a
		
		}
	}
	country_event = { #QIN victory
		id = chinese_empire.10
		title = chinese_empire.10.t
		desc = chinese_empire.10.d
		
		fire_only_once = yes
		
		trigger = {
			date > 1900.1.1
			date < 1914.1.1
			QIN = {has_country_flag = civil_war}
			CHI = {surrender_progress > 0.97}
			QIN = {has_war_with = CHI}
			
		}

		immediate = {
			QIN = {
				white_peace = CHI
				
			}
			
			CHI = { release = QIN }
		}
		option = {
			name = chinese_empire.10.a
		
		}
	
	
	
	}
	country_event = { #support rebellion
		id = chinese_empire.11
		desc = chinese_empire.11.d
		title = chinese_empire.11.t
		fire_only_once = yes
		trigger = {
			OR = {
				tag = ENG
				tag = FRA
				tag = GER
				tag = JAP
			}
			date > 1904.1.1
			date < 1905.1.1
			NOT = {QIN = {has_country_flag = civil_war}}
			NOT = {QIN = {has_country_flag = splitted}}
			
		}
		option = {
		name = chinese_empire.11.a
		set_country_flag = support_uprising
		QIN = {
			add_to_variable = {
				var = uprising_strengh
				value = 0.05
		
			}
		}
	}
	option = {
		name = chinese_empire.11.b
	
	}
}
	
	
	
	country_event = { #uprising Rumors
		id = chinese_empire.12
		desc = chinese_empire.12.d
		title = chinese_empire.12.t
		fire_only_once = yes
		trigger = {
			tag = QIN
			date > 1904.1.1
			date < 1905.1.1
			NOT = {QIN = {has_country_flag = civil_war}}
			NOT = {QIN = {has_country_flag = splitted}}
		}

	
	
	immediate = {
		QIN = {set_country_flag = uprising_preparing}
		add_to_variable = {
			var = uprising_strengh
			value = 0.5
		
		}
	
	}
	option = {
		name = chinese_empire.12.a
		QIN = {set_country_flag = side_with_QIN}
	}
	option = {
		name = chinese_empire.12.b
		QIN = {set_country_flag = side_with_CHI}
	}
	
}

	country_event = { #in case regular war :QIN wins
		id = chinese_empire.13
		title = chinese_empire.13.t
		desc = chinese_empire.13.d
		trigger = {
			tag = QIN
			QIN = {has_country_flag = revolution_started}
			CHI = {surrender_progress > 0.98}
		
		}
	
	
	immediate = {
		QIN = {
			annex_country = {
				target = CHI}
		}
		QIN = {clr_country_flag = revolution_started}
	
	}
	option = {
		#give some autonomy
		
	
	}
	option = {
		#no, the empire should keep everything
	
	
	}
}
	
	country_event = { #in case regular war :CHI wins
		id = chinese_empire.14
		title = chinese_empire.14.t
		desc = chinese_empire.14.d
		fire_only_once = yes
		
		trigger = {
			tag = CHI
			QIN = {has_country_flag = revolution_started}
			QIN = {surrender_progress > 0.8}
			QIN = {has_country_flag = revolution_started}
		}
		
		immediate = {
			CHI = {
				annex_country = {
					target = QIN
				}
			}
			QIN = {clr_country_flag = revolution_started} 
		}
		option = {
			# Proclaim the republic
			
		}
		option = {
			#we need to find another system
		}
	}
	country_event = { #Officer proposes help
		id = chinese_empire.15
		title = chinese_empire.15.t
		desc = chinese_empire.15.d
		fire_only_once = yes
		trigger = {
			tag = CHI
			QIN = {has_country_flag = revolution_started}
			QIN = {surrender_progress > 0.05}
		
		}
		immediate = { 
		QIN = {
			country_event = {
				id = chinese_empire.16 days = 10
			}
		}
		option = {	#ask for help
			QIN = {
				transfer_units_fraction ={
					target = CHI
					size = 0.2
					stockpile_ratio = 0.2
					army_ratio = 0.2
					navy_ratio = 0
					air_ratio = 0
				}
				
			}
			CHI = {
				create_country_leader = {
					name = "Yuan Shikai"
					picture = "Portrait_China_Yuan_Shikai.dds"
					expire = "1965.1.1"
					ideology = despotism
					
	
				}
				
				
			}
			QIN = {
				country_event = {
					id = chinese_empire.14 days = 30
				}
			}
			ai_chance = { base = 10 }
			CHI = {
			
				country_event = {chinese_empire.17 days = 40}
			}
		}
		option = { #renounce help
		
		}
	}
	country_event = { #MON and TIB indep
		id = chinese_empire.16
		title = chinese_empire.16.t
		desc = chinese_empire.16.d
		is_triggered_only = yes
		
		immediate = {
			QIN = {release = MON}
			QIN = {release = TIB}
			QIN = {
				transfer_units_fraction ={
					target = TIB
					size = 0.2
					stockpile_ratio = 0.02
					army_ratio = 0.2
					navy_ratio = 0
					air_ratio = 0
				}
			}
			QIN = {
				transfer_units_fraction ={
					target = MON
					size = 0.2
					stockpile_ratio = 0.02
					army_ratio = 0.2
					navy_ratio = 0
					air_ratio = 0
				}
			}
			CHI = {
				country_event = { 
					id = chinese_empire.14
					days = 5
				}
			}
			
		}
	}
	country_event = { #Dictatorship 
		id = chinese_empire.17
		title = chinese_empire.17.t
		desc = chinese_empire.17.d
		is_triggered_only = yes
	
		option = {
			#cecede
			ai_chance = { base = 10 }
			country_event = {id = chinese_empire.18 days = 10}
		}
		option = {
			#keep the system
		}
	
	}
	country_event = { #Dictator's death
		id = chinese_empire.18
		title = chinese_empire.18.t
		desc = chinese_empire.18.d
		is_triggered_only = yes
		
		immediate = {
			CHI = {kill_country_leader = yes}
			
		}
		
		option = {}
	
	}
	
	